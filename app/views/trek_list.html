<ion-content>
    <ion-list class="trek-list">
        <ion-item ng-repeat="trek in treks.features | filter:filterTreks | filter:{properties:activeFilters.search} | orderBy:orderProp" ui-sref="home.trek.detail({ trekId: trek.id })" class="trek-list__item item-thumbnail-left">
            <img class="thumbnail" ng-src="{{ trek.properties.pictures.0.url }}"/>
            <h3>{{ trek.properties.name }}</h3>
            <p class="departure">{{ 'trek_list.departure' |Â translate }} : {{ trek.properties.departure }}</p>
            <p class="difficulty">{{ trek.properties.difficulty.label }} - {{ trek.properties.duration_pretty }}</p>
            <p ng-if="trek.distanceFromUser">{{ 'trek_list.distance' | translate }} : {{ trek.distanceFromUser }}km</p>
            <div class="trek-list__item__detail__actions">
                <a ng-if="!trek.tiles.isDownloaded && !trek.tiles.inDownloadProgress" ng-click="$event.stopPropagation(); downloadTile(trek.id);" class="trek-list__item__detail-bt button-icon icon ion-archive"></a>
                <span ng-if="trek.tiles.inDownloadProgress">{{ trek.tiles.realProgress }}%</span>
                <a ng-if="trek.tiles.isDownloaded && !trek.tiles.inDownloadProgress" class="trek-list__item__detail-bt button-icon icon ion-checkmark-round"></a>
            </div>
        </ion-item>
    </ion-list>
</ion-content>

<div ui-view></div>